<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Preface #  Here list so many steps because I alway prefer clean reinstall my Mac and avoid use apple time machine. It is a painful process, but clean environment makes me feel less anxious.
Pre-processing #  Erase Mac before reinstall it #   Backup .zsh_history Cancel AppleMusic 授權 (max limit 10 devices, 5 desktops) logout iMessage logout iCloud (system preference > iCloud) logout App Store Reboot and press key &ldquo;option&rdquo;  Erase disk Install OSX from USB    Setup after reinstall #  辨識鍵盤 (系統主動, 外接鍵盤) 設定鍵盤  Option 與 Command Key 互換 (外接鍵盤)) 鍵盤 > 按鍵重複 快, 重複暫延 短 文字 > disable 自動大寫 and 加入全形句號 快速鍵  指揮中心 > 顯示通知中心 Cmd + Shit + > 輸入方式 > 選擇上一個 Cmd + Space, disable Next 停用 Spotlight 的快速鍵 (與 Alfred 習慣的快速鍵衝突)   輸入方式 > disable 使用大寫鎖定切換 ABC 與目前輸入方式 defaults write -g ApplePressAndHoldEnabled -bool false  關閉 key 按壓連續輸入被限制的設定, need relogin"><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Mac Manual Setup"><meta property="og:description" content="Preface #  Here list so many steps because I alway prefer clean reinstall my Mac and avoid use apple time machine. It is a painful process, but clean environment makes me feel less anxious.
Pre-processing #  Erase Mac before reinstall it #   Backup .zsh_history Cancel AppleMusic 授權 (max limit 10 devices, 5 desktops) logout iMessage logout iCloud (system preference > iCloud) logout App Store Reboot and press key &ldquo;option&rdquo;  Erase disk Install OSX from USB    Setup after reinstall #  辨識鍵盤 (系統主動, 外接鍵盤) 設定鍵盤  Option 與 Command Key 互換 (外接鍵盤)) 鍵盤 > 按鍵重複 快, 重複暫延 短 文字 > disable 自動大寫 and 加入全形句號 快速鍵  指揮中心 > 顯示通知中心 Cmd + Shit + > 輸入方式 > 選擇上一個 Cmd + Space, disable Next 停用 Spotlight 的快速鍵 (與 Alfred 習慣的快速鍵衝突)   輸入方式 > disable 使用大寫鎖定切換 ABC 與目前輸入方式 defaults write -g ApplePressAndHoldEnabled -bool false  關閉 key 按壓連續輸入被限制的設定, need relogin"><meta property="og:type" content="article"><meta property="og:url" content="https://captainvincent.github.io/env-setup-workflow/docs/subject/manual/mac/"><meta property="article:section" content="docs"><title>Mac Manual Setup | Env Setup Workflow</title><link rel=manifest href=/env-setup-workflow/manifest.json><link rel=icon href=/env-setup-workflow/favicon.png type=image/x-icon><link rel=stylesheet href=/env-setup-workflow/book.min.44d646274b130ab88a21f0e2d365f1bbb5167a4df0287f8376c42ce0cd7d1919.css integrity="sha256-RNZGJ0sTCriKIfDi02Xxu7UWek3wKH+DdsQs4M19GRk=" crossorigin=anonymous><script defer src=/env-setup-workflow/flexsearch.min.js></script><script defer src=/env-setup-workflow/en.search.min.33a041cd3bd440dbd5b965afc93deea0e0f4905e5f1f0ceb36fce876154159fd.js integrity="sha256-M6BBzTvUQNvVuWWvyT3uoOD0kF5fHwzrNvzodhVBWf0=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a href=/env-setup-workflow/><span>Env Setup Workflow</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><a href=https://captainvincent.github.io/env-setup-workflow/docs/subject/>Flowchart</a><ul><li><a href=https://captainvincent.github.io/env-setup-workflow/docs/subject/manual/>Manual Operations</a><ul><li><a href=https://captainvincent.github.io/env-setup-workflow/docs/subject/manual/linux/>Linux Manual Setup</a></li><li><a href=https://captainvincent.github.io/env-setup-workflow/docs/subject/manual/mac/ class=active>Mac Manual Setup</a></li></ul></li><li><input type=checkbox id=section-f44bc37bbd3b6af049dec74645aa4d1e class=toggle>
<label for=section-f44bc37bbd3b6af049dec74645aa4d1e class="flex justify-between"><a role=button>scripts</a></label><ul><li><a href=https://captainvincent.github.io/env-setup-workflow/docs/subject/scripts/rename_hostname/>rename_hostname.sh</a><ul></ul></li><li><a href=https://captainvincent.github.io/env-setup-workflow/docs/subject/scripts/phase1/>phase1.sh</a><ul></ul></li><li><a href=https://captainvincent.github.io/env-setup-workflow/docs/subject/scripts/phase2/>phase2.sh</a><ul></ul></li><li><a href=https://captainvincent.github.io/env-setup-workflow/docs/subject/scripts/install_python_global/>install_python_global.sh</a><ul></ul></li><li><a href=https://captainvincent.github.io/env-setup-workflow/docs/subject/scripts/install_npm_global/>install_npm_global.sh</a><ul></ul></li><li><a href=https://captainvincent.github.io/env-setup-workflow/docs/subject/scripts/relink_chezmoi2mackup/>relink_chezmoi2mackup.sh</a><ul></ul></li><li><a href=https://captainvincent.github.io/env-setup-workflow/docs/subject/scripts/setupswap/>setupSwap</a><ul></ul></li></ul></li></ul></li></ul></nav><script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/env-setup-workflow/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Mac Manual Setup</strong>
<label for=toc-control><img src=/env-setup-workflow/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#erase-mac-before-reinstall-it>Erase Mac before reinstall it</a></li><li><a href=#setup-after-reinstall>Setup after reinstall</a></li><li><a href=#post-processing>Post-processing</a></li><li><a href=#exist-issues>Exist issues</a></li></ul><ul><li><a href=#enable-third-party-app>Enable third-party app</a></li><li><a href=#enable-aptx-codec>Enable aptX codec</a></li><li><a href=#homebrew-temp-folder>Homebrew temp folder</a></li><li><a href=#homebrew-cask-實際安裝路徑>Homebrew cask 實際安裝路徑</a></li><li><a href=#update-homebrew-installed-tools>Update homebrew installed tools</a></li><li><a href=#總是顯示-localhost-在-zsh-上>總是顯示 localhost 在 zsh 上</a></li><li><a href=#pmsetconfig>pmset.config</a></li><li><a href=#xcode-theme>xcode theme</a></li><li><a href=#unknown-section>Unknown section</a></li></ul></nav></aside></header><article class=markdown><h1 id=preface>Preface
<a class=anchor href=#preface>#</a></h1><p>Here list so many steps because I alway prefer clean reinstall my Mac and avoid use apple time machine. It is a painful process, but clean environment makes me feel less anxious.</p><h1 id=pre-processing>Pre-processing
<a class=anchor href=#pre-processing>#</a></h1><h2 id=erase-mac-before-reinstall-it>Erase Mac before reinstall it
<a class=anchor href=#erase-mac-before-reinstall-it>#</a></h2><ul><li>Backup .zsh_history</li><li>Cancel AppleMusic 授權 (max limit 10 devices, 5 desktops)</li><li>logout iMessage</li><li>logout iCloud (system preference > iCloud)</li><li>logout App Store</li><li>Reboot and press key &ldquo;option&rdquo;<ul><li>Erase disk</li><li>Install OSX from USB</li></ul></li></ul><h2 id=setup-after-reinstall>Setup after reinstall
<a class=anchor href=#setup-after-reinstall>#</a></h2><ol start=0><li>辨識鍵盤 (系統主動, 外接鍵盤)</li><li>設定鍵盤<ul><li>Option 與 Command Key 互換 (外接鍵盤))</li><li>鍵盤 > 按鍵重複 <code>快</code>, 重複暫延 <code>短</code></li><li>文字 > disable <code>自動大寫</code> and <code>加入全形句號</code></li><li>快速鍵<ul><li>指揮中心 > 顯示通知中心 <code>Cmd + Shit + ></code></li><li>輸入方式 > 選擇上一個 <code>Cmd + Space</code>, disable Next</li><li>停用 Spotlight 的快速鍵 (與 Alfred 習慣的快速鍵衝突)</li></ul></li><li>輸入方式 > disable 使用大寫鎖定切換 ABC 與目前輸入方式</li><li><code>defaults write -g ApplePressAndHoldEnabled -bool false</code><blockquote><p>關閉 key 按壓連續輸入被限制的設定, need relogin</p></blockquote></li><li>停用 Text 連續兩個 space 被替換成 dot (Add period with double-space)<blockquote><p>not exist anymore?</p></blockquote></li><li>全面鍵盤操控 (鍵盤) (not exist anymore?)</li></ul></li><li>觸控式軌跡板<ul><li>點按<ul><li><input checked disabled type=checkbox> 點一下來選按</li><li><input disabled type=checkbox> 靜音點按 (? 用途不明)</li></ul></li><li>更多手勢<ul><li><input checked disabled type=checkbox> App Expose</li></ul></li></ul></li><li>輔助使用中 > 指標控制 > 觸控式軌跡板選項 > <code>啟用拖移 | 帶拖移鎖定</code></li><li>使用者與群組 > 設定帳戶頭像<blockquote><p>將圖片直接拖曳到原始頭像上即可覆蓋, (Option) 可以一併同時把登入畫面改成直接輸入密碼, 不用等待選取使用者</p></blockquote></li><li>Internet 帳號<ul><li>iCloud<ul><li><input checked disabled type=checkbox> iCloud雲疊</li><li><input disabled type=checkbox> 照片</li><li><input disabled type=checkbox> 郵件</li><li><input checked disabled type=checkbox> 聯絡人</li><li><input disabled type=checkbox> 行事曆</li><li><input checked disabled type=checkbox> 提醒事項</li><li><input checked disabled type=checkbox> Safari</li><li><input checked disabled type=checkbox> 備忘錄</li><li><input disabled type=checkbox> Siri</li><li><input checked disabled type=checkbox> 鑰匙圈</li><li><input checked disabled type=checkbox> 尋找我的Mac</li><li><input checked disabled type=checkbox> 股市</li><li><input disabled type=checkbox> 家庭</li></ul></li><li>Google (option, 工作用的電腦有加入公司行事曆)</li></ul></li><li>Finder Preference<ul><li>一般<ul><li>桌面顯示 disable 外接硬碟, CD、DVD and iPod</li><li>開啟新的 finder 視窗在 <code>下載項目</code></li></ul></li><li>側邊欄<ul><li>disable <code>最近項目</code>, <code>硬碟</code>, <code>最近使用過的標記</code></li><li>enable $HOME</li></ul></li><li>進階<ul><li>enable 顯示所有副檔名</li><li>disable 改變副檔名前顯示警告</li></ul></li></ul></li><li>Docker 與選單列<ul><li>Dock enable <code>放大</code> and <code>自動隱藏及顯示Dock</code>, disable <code>顯示最近使用過的應用程式</code></li><li>藍芽 在選單列中顯示</li><li>聲音 在選單列中顯示 <code>永遠</code></li><li>時鐘 disable <code>顯示星期</code>, <code>顯示日期</code>, <code>顯示上午/下午</code> (只要勾選數位)</li><li>Spotlight disable <code>在選單中顯示</code></li></ul></li><li>Misc<ul><li>隱私 > 進入睡眠立即鎖定</li><li>一般<ul><li>enable <code>關閉文件時詢問保留</code></li><li>disable <code>結束 App 時關閉視窗</code></li><li>最近使用過的項目 <code>無</code></li></ul></li><li>聲音 > 音效 > 調整提示音音量至最小</li></ul></li><li>從 iMessage 中打開 sync from iCloud 的選項</li><li>reverse <code>Erase Mac</code> action</li></ol><h2 id=post-processing>Post-processing
<a class=anchor href=#post-processing>#</a></h2><ul><li>Copy or merge <code>.zsh_history</code> from old computer</li><li>Point alfred preference to Dropbox and enable powerpack</li><li>Install Smooze (mouse only)</li><li>Install fonts if iterm2 font not display normal with p10k</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>brew tap homebrew/cask-fonts
brew install install font-hack-nerd-font
</code></pre></div><ul><li>If iterm2 has tab style setting (Because Catalina preference not match with Big Sur)<blockquote><p><a href=https://felixjung.io/blog/posts/pretty-iterm2-with-a-modern-titlebar>https://felixjung.io/blog/posts/pretty-iterm2-with-a-modern-titlebar</a></p></blockquote></li><li>Install sublime package control<blockquote><p><code>cmd+shift+p</code> type <code>:Install Package Control</code> first and
press enter and wait all plugins all installed</p></blockquote></li></ul><h2 id=exist-issues>Exist issues
<a class=anchor href=#exist-issues>#</a></h2><ul><li>Overwrite Zotero with darktheme (should be auto)</li><li>brave not sync yet</li></ul><hr><h1 id=options>Options
<a class=anchor href=#options>#</a></h1><h2 id=enable-third-party-app>Enable third-party app
<a class=anchor href=#enable-third-party-app>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo spctl --master-disable                      // 開啟 app 安裝第三方的選項
sudo xattr -r -d com.apple.quarantine <span style=color:#e6db74>`</span>app path<span style=color:#e6db74>`</span> // 用拖拉至 terminal 即可, 移除 App 附加屬性
xattr -cr xxx.app                                // 如果上面方法失效的話可用此移除 binary 的全部附加屬性
</code></pre></div><h2 id=enable-aptx-codec>Enable aptX codec
<a class=anchor href=#enable-aptx-codec>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo defaults write bluetoothaudiod <span style=color:#e6db74>&#34;Enable AptX codec&#34;</span> -bool true // Enable Aptx
</code></pre></div><h2 id=homebrew-temp-folder>Homebrew temp folder
<a class=anchor href=#homebrew-temp-folder>#</a></h2><blockquote><p>Manual clean temp folder</p></blockquote><ul><li><code>$HOME/Library/Caches/Homebrew/</code></li><li><code>$HOME/Library/Caches/Homebrew/Cask</code></li></ul><h2 id=homebrew-cask-實際安裝路徑>Homebrew cask 實際安裝路徑
<a class=anchor href=#homebrew-cask-%e5%af%a6%e9%9a%9b%e5%ae%89%e8%a3%9d%e8%b7%af%e5%be%91>#</a></h2><blockquote><p>Manual remove app if it&rsquo;s not cleaned up</p></blockquote><ul><li><code>/usr/local/Caskroom/</code></li></ul><h2 id=update-homebrew-installed-tools>Update homebrew installed tools
<a class=anchor href=#update-homebrew-installed-tools>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>brew cu --all
brew cu -facy
brew upgrade
</code></pre></div><h2 id=總是顯示-localhost-在-zsh-上>總是顯示 localhost 在 zsh 上
<a class=anchor href=#%e7%b8%bd%e6%98%af%e9%a1%af%e7%a4%ba-localhost-%e5%9c%a8-zsh-%e4%b8%8a>#</a></h2><p>comment <code>~/.p10k.zsh</code> below line for always show context prompt (Option)</p><pre><code># typeset -g POWERLEVEL9K_CONTEXT_{DEFAULT,SUDO}_{CONTENT,VISUAL_IDENTIFIER}_EXPANSION=
</code></pre><h2 id=pmsetconfig>pmset.config
<a class=anchor href=#pmsetconfig>#</a></h2><p>save mac power</p><h2 id=xcode-theme>xcode theme
<a class=anchor href=#xcode-theme>#</a></h2><p><a href=https://github.com/hdoria/xcode-themes>https://github.com/hdoria/xcode-themes</a></p><blockquote><p>目前已經匯入完成, mackup 應該要會自動備份不用再重新安裝</p></blockquote><h2 id=unknown-section>Unknown section
<a class=anchor href=#unknown-section>#</a></h2><p>`CFLAGS="-I$(brew &ndash;prefix readline)/include -I$(brew &ndash;prefix openssl)/include -I$(xcrun &ndash;show-sdk-path)/usr/include" \ ~
LDFLAGS="-L$(brew &ndash;prefix readline)/lib -L$(brew &ndash;prefix openssl)/lib"<br>PYTHON_CONFIGURE_OPTS=&ndash;enable-unicode=ucs2<br>pyenv install -v 3.8.0</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#erase-mac-before-reinstall-it>Erase Mac before reinstall it</a></li><li><a href=#setup-after-reinstall>Setup after reinstall</a></li><li><a href=#post-processing>Post-processing</a></li><li><a href=#exist-issues>Exist issues</a></li></ul><ul><li><a href=#enable-third-party-app>Enable third-party app</a></li><li><a href=#enable-aptx-codec>Enable aptX codec</a></li><li><a href=#homebrew-temp-folder>Homebrew temp folder</a></li><li><a href=#homebrew-cask-實際安裝路徑>Homebrew cask 實際安裝路徑</a></li><li><a href=#update-homebrew-installed-tools>Update homebrew installed tools</a></li><li><a href=#總是顯示-localhost-在-zsh-上>總是顯示 localhost 在 zsh 上</a></li><li><a href=#pmsetconfig>pmset.config</a></li><li><a href=#xcode-theme>xcode theme</a></li><li><a href=#unknown-section>Unknown section</a></li></ul></nav></div></aside></main></body></html>